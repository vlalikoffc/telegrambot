# –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –ø–ª–∞–≥–∏–Ω–∞

–ü–ª–∞–≥–∏–Ω—ã –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –≤ —Å—Ç—Ä–æ–≥–æ–º –ø–æ—Ä—è–¥–∫–µ –∏ –≤ —Ä–∞–∑–Ω—ã—Ö –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞—Ö.

```
–∑–∞–ø—É—Å–∫ –±–æ—Ç–∞
  ‚îî‚îÄ on_load()
        ‚îú‚îÄ (–ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏) on_tick()
        ‚îú‚îÄ (–∫–∞–∂–¥—ã–π —Å–Ω–∏–º–æ–∫) on_snapshot()
        ‚îî‚îÄ (–∫–∞–∂–¥—ã–π —Ä–µ–Ω–¥–µ—Ä —Å—Ç–∞—Ç—É—Å–∞) on_render()
–∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –±–æ—Ç–∞
  ‚îî‚îÄ on_shutdown()
```

## on_load(ctx)

**–ö–æ–≥–¥–∞:** –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ, —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏.  
**–î–ª—è —á–µ–≥–æ:** –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è, –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —Ä–∞–±–æ—Ç–µ.

```python
def on_load(self, ctx):
    ctx.logger.info("–ü–ª–∞–≥–∏–Ω –∑–∞–≥—Ä—É–∂–µ–Ω")
```

## on_snapshot(snapshot, ctx)

**–ö–æ–≥–¥–∞:** –∫–∞–∂–¥—ã–π —Ä–∞–∑ –ø—Ä–∏ —Å–±–æ—Ä–µ —Å–Ω–∏–º–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.  
**–î–ª—è —á–µ–≥–æ:** –¥–æ–±–∞–≤–∏—Ç—å —Å–≤–æ–∏ –ø–æ–ª—è –≤ `snapshot["plugins"][<name>]`.

```python
def on_snapshot(self, snapshot, ctx):
    data = snapshot.setdefault("plugins", {}).setdefault(self.name, {})
    data["tick"] = ctx.clock.now()
```

## on_render(render_ctx, ctx)

**–ö–æ–≥–¥–∞:** –∫–∞–∂–¥—ã–π —Ä–∞–∑ –ø—Ä–∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–∏ —Ç–µ–∫—Å—Ç–∞ —Å—Ç–∞—Ç—É—Å–∞.  
**–î–ª—è —á–µ–≥–æ:** –∏–∑–º–µ–Ω–∏—Ç—å –∏–ª–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç—å —Ç–µ–∫—Å—Ç —Å—Ç–∞—Ç—É—Å–∞.

```python
def on_render(self, render_ctx, ctx):
    ctx.status.add_line("üîå –ü–ª–∞–≥–∏–Ω –∞–∫—Ç–∏–≤–µ–Ω")
```

## on_tick(ctx)

**–ö–æ–≥–¥–∞:** –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ (–ø—Ä–∏–º–µ—Ä–Ω–æ —Ä–∞–∑ –≤ 10 —Å–µ–∫—É–Ω–¥).  
**–î–ª—è —á–µ–≥–æ:** —Ñ–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è.

```python
async def on_tick(self, ctx):
    ctx.storage.set("last_tick", ctx.clock.now())
```

## on_shutdown(ctx)

**–ö–æ–≥–¥–∞:** –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –±–æ—Ç–∞.  
**–î–ª—è —á–µ–≥–æ:** —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–ª–∏ cleanup.

```python
def on_shutdown(self, ctx):
    ctx.logger.info("–í—ã–∫–ª—é—á–∞–µ–º—Å—è")
```
